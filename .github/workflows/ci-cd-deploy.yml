# ğŸ“ .github/workflows/ci-cd-deploy.yml
# Create at 2504240930 Ver1.0

name: CI/CD Build & Deploy

on:
  push:
    branches:
      - main

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ›ï¸ Checkout code
        uses: actions/checkout@v3

      - name: ğŸ”§ Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '18'

      - name: ğŸ“¦ Install dependencies
        run: |
          if [ -f package-lock.json ]; then
            npm ci
          else
            npm install
          fi
      
      - name: âš™ï¸ Build web-app
        run: |
          npm run build  # if you have a build step (e.g. Vite)
          # Copy plain HTML/CSS/JS into public folder
          cp -R index.html css js components images public/

      - name: ğŸ”‘ Authenticate Firebase
        uses: w9jds/firebase-action@v2.2.0
        with:
          args: deploy --only hosting
        env:
          FIREBASE_TOKEN: ${{ secrets.FIREBASE_TOKEN }}
          PROJECT_ID: ${{ secrets.FIREBASE_PROJECT_ID }}
