<!-- ğŸ“ public/components/ContentAnalyzer.html -->
<!-- Create at 2505011730 Ver1.23 -->

<div class="main-container">
    <div class="title-container">
        <h1>ì½˜í…ì¸  ìƒì„¸ë¶„ì„ê¸°</h1>
    </div>
    
    <div class="form-card">
        <div class="input-row">
            <label class="form-label input-label">ë¶„ì„í•  ëŒ€ìƒ</label>
            <input
                type="text"
                id="inputValue"
                class="form-input"
                placeholder="ë¶„ì„í•˜ì‹¤ YouTube URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”"
                onkeydown="if(event.key === 'Enter') { event.preventDefault(); window.startAnalysis && window.startAnalysis(); }"
            />
            <button id="analyzeBtn" class="btn btn-primary" onclick="window.startAnalysis && window.startAnalysis()">
                ë¶„ì„ ì‹œì‘
            </button>
        </div>
        <div id="errorMessage" class="error-message" style="display: none; color: var(--danger); margin-top: 8px; font-size: 14px; text-align: center;"></div>
    </div>
  
    <div id="resultsContainer" class="card results-container" style="display: none;">
        <div class="card-header">
            <h2 id="videoTitle" class="card-title">ë¹„ë””ì˜¤ ì œëª©</h2>
            <a id="videoUrl" href="#" target="_blank" class="link">ì›ë³¸ URL ë³´ê¸°</a>
        </div>
  
        <div class="captions-container" style="margin-top: 20px; max-height: 500px; overflow-y: auto; padding: 20px; background-color: var(--bg-secondary); border-radius: var(--radius-md);">
            <pre id="captionsOutput" class="captions-text" style="white-space: pre-wrap; font-family: 'Noto Sans KR', sans-serif; line-height: 1.6;"></pre>
        </div>
    </div>
  </div>
  
  <style>
  /* ë¡œë”© ìŠ¤í”¼ë„ˆ ìŠ¤íƒ€ì¼ */
  .spinner {
      width: 40px;
      height: 40px;
      border: 4px solid rgba(0, 123, 255, 0.2);
      border-radius: 50%;
      border-top-color: var(--primary);
      animation: spin 1s linear infinite;
  }
  
  @keyframes spin {
      to { transform: rotate(360deg); }
  }
  
  @keyframes slideUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
  }
  
  .results-container {
      animation: slideUp 0.5s ease-out;
  }
  </style>
  
  <script>
  // í˜ì´ì§€ê°€ ë¡œë“œë˜ë©´ ì—”í„° í‚¤ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€ (ì¸ë¼ì¸ ì†ì„± ë°±ì—…)
  document.addEventListener('DOMContentLoaded', function() {
      console.log('ContentAnalyzer ì»´í¬ë„ŒíŠ¸ DOM ë¡œë“œë¨');
      
      // ì—”í„° í‚¤ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
      const inputElement = document.getElementById('inputValue');
      if (inputElement) {
          console.log('ì…ë ¥ í•„ë“œì— í‚¤ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡');
          
          // keydown ì´ë²¤íŠ¸
          inputElement.addEventListener('keydown', function(e) {
              if (e.key === 'Enter') {
                  console.log('ì—”í„° í‚¤ ê°ì§€ë¨ (keydown)');
                  e.preventDefault();
                  if (window.startAnalysis) {
                      window.startAnalysis();
                  } else {
                      console.error('startAnalysis í•¨ìˆ˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ');
                  }
              }
          });
          
          // keypress ì´ë²¤íŠ¸ (ì´ì¤‘ ë³´í˜¸)
          inputElement.addEventListener('keypress', function(e) {
              if (e.key === 'Enter') {
                  console.log('ì—”í„° í‚¤ ê°ì§€ë¨ (keypress)');
                  e.preventDefault();
                  if (window.startAnalysis) {
                      window.startAnalysis();
                  } else {
                      console.error('startAnalysis í•¨ìˆ˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ');
                  }
              }
          });
      } else {
          console.error('ì…ë ¥ í•„ë“œ ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ (id="inputValue")');
      }
      
      // ë¶„ì„ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
      const analyzeBtn = document.getElementById('analyzeBtn');
      if (analyzeBtn) {
          console.log('ë¶„ì„ ë²„íŠ¼ì— í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡');
          analyzeBtn.addEventListener('click', function() {
              if (window.startAnalysis) {
                  window.startAnalysis();
              } else {
                  console.error('startAnalysis í•¨ìˆ˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ');
              }
          });
      } else {
          console.error('ë¶„ì„ ë²„íŠ¼ ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ (id="analyzeBtn")');
      }
  });
  
  // ì»´í¬ë„ŒíŠ¸ ë¡œë“œ ì™„ë£Œ ì´ë²¤íŠ¸ ì¶”ê°€ ê°ì§€
  window.addEventListener('component-loaded', function() {
      console.log('component-loaded ì´ë²¤íŠ¸ ê°ì§€ë¨, ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¬ì´ˆê¸°í™”');
      
      setTimeout(function() {
          // ì—”í„° í‚¤ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
          const inputElement = document.getElementById('inputValue');
          if (inputElement) {
              console.log('ì…ë ¥ í•„ë“œì— í‚¤ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡ (component-loaded)');
              
              // keydown ì´ë²¤íŠ¸
              inputElement.addEventListener('keydown', function(e) {
                  if (e.key === 'Enter') {
                      console.log('ì—”í„° í‚¤ ê°ì§€ë¨ (keydown, component-loaded)');
                      e.preventDefault();
                      if (window.startAnalysis) {
                          window.startAnalysis();
                      }
                  }
              });
          }
      }, 100);
  });
  </script>
  
  <!-- ì™¸ë¶€ ìŠ¤í¬ë¦½íŠ¸ ì°¸ì¡° -->
  <script src="/js/contentAnalyzer.js"></script>